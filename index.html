<meta name="viewport" content="width=device-width, initial-scale=1">

<script>

function addExercise() {
    const newExercise = document.createElement("div")
     // and give it some content
    const newContent = document.createTextNode("Name: ");
    // add the text node to the newly created div
    newExercise.appendChild(newContent);

    const exerciseNameField = document.createElement("input")
    exerciseNameField.type = "text"
    exerciseNameField.required = true
    newExercise.appendChild(exerciseNameField)

    const addNewPropertyButton = document.createElement("button")
    addNewPropertyButton.textContent = "Add new property"
    addNewPropertyButton.onclick = () => { addNewPropertyToExercise(newExercise) }
    newExercise.appendChild(addNewPropertyButton)

    const exerciseProperties = document.createElement("div")
    exerciseProperties.className = "exercise_properties"
    newExercise.appendChild(exerciseProperties)

    const deleteExerciseButton = document.createElement("button")
    deleteExerciseButton.textContent = "Delete exercise"
    deleteExerciseButton.onclick = () => { deleteExercise(newExercise) }
    newExercise.appendChild(deleteExerciseButton)

    document.getElementById("exercises").appendChild(newExercise)

}

function deleteExercise(exercise) {
    document.getElementById("exercises").removeChild(exercise)
}

function addNewPropertyToExercise(exercise) {
    // Code to add a new property to an exercise
    const newExerciseProperty = document.createElement("div")
    const newExercisePropertyKey = document.createElement("input")
    newExercisePropertyKey.type = "text"
    newExerciseProperty.appendChild(newExercisePropertyKey)
    const newExercisePropertyValue = document.createElement("input")
    newExercisePropertyValue.type = "text"
    newExerciseProperty.appendChild(newExercisePropertyValue)

    const deleteExercisePropertyButton = document.createElement("button")
    deleteExercisePropertyButton.textContent = "Delete property"
    deleteExercisePropertyButton.onclick = () => { deleteExerciseProperty(exercise, newExerciseProperty) }
    newExerciseProperty.appendChild(deleteExercisePropertyButton)

    exercise.getElementsByClassName("exercise_properties")[0].appendChild(newExerciseProperty)
}

function deleteExerciseProperty(exercise, exerciseProperty) {
    exercise.getElementsByClassName("exercise_properties")[0].removeChild(exerciseProperty)
}

function makeWorkout() {
    window.alert("Workout machten'ed")
    // Read what the user has input
    // Save into local storage

    // var numberOfSavedWorkouts = parseInt(localStorage.getItem("numberOfSavedWorkouts"))
    // if (numberOfSavedWorkouts == null) {
    //    numberOfSavedWorkouts = 0
    //
    // }
    // localStorage.setItem("workout_" + numberOfSavedWorkouts + 1, exercises.toString())
    // localStorage.setItem("numberOfSavedWorkouts", (numberOfSavedWorkouts + 1).toString())
}

</script>

<!DOCTYPE html>
<h1> Hello World! </h1>

<div id="exercises">

</div>

<button onclick="addExercise()"> Add exercise </button>
<button onclick="makeWorkout()"> Machten der Werkout </button>